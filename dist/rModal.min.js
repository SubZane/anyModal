/*! rModal - v1.0.0 - 2016-08-24
* https://github.com/SubZane/rmodal
* Copyright (c) 2016 Andreas Norman; Licensed MIT */
var rModal=function(){var a,b,c=document.documentElement.clientHeight,d={element:null,name:"",isFed:!1,ajaxdataurl:""},e={transitiontime:300,redrawOnResize:!0,logerrors:!1},f=function(b){options=o(e,b||{}),i(),document.querySelector("body").innerHTML+='<div class="rModal-overlay"></div>',a=document.querySelector(".rModal-overlay");var f=document.querySelectorAll(".rModal");p(f,function(a,b){a.addEventListener("touchmove",function(b){a.scrollHeight<=parseInt(c,10)&&b.preventDefault()})});var g=document.querySelectorAll("[data-modal]");p(g,function(b,c){b.addEventListener("click",function(c){c.preventDefault(),d.name=b.getAttribute("data-modal"),d.effect=b.getAttribute("data-effect"),d.element=document.querySelector("#"+d.name),d.element.classList.add(d.effect),d.element.style.display="none";d.element.offsetHeight;if(d.element.style.display="",d.element.hasAttribute("data-modaldata")?(d.isFed=!0,d.ajaxdataurl=d.element.getAttribute("data-modaldata")):d.isFed=!1,"click touchmove touchend touchleave touchcancel".split(" ").forEach(function(b){a.addEventListener(b,function(a){a.target===this&&n()})}),options.redrawOnResize===!0){var e;clearTimeout(e),e=setTimeout(k,100)}window.addEventListener("orientationchange",function(){l()}),m()})})},g=function(){return/Android|webOS|iPhone|iPad|iPod|BlackBerry|IEMobile|Opera Mini/i.test(navigator.userAgent)?!0:!1},h=function(){var a=document.body.scrollHeight,b=document.documentElement.clientHeight,c=a>b;return c},i=function(){var a=document.createElement("div");a.style.visibility="hidden",a.style.width="100px",a.style.msOverflowStyle="scrollbar",document.body.appendChild(a);var c=a.offsetWidth;a.style.overflow="scroll";var d=document.createElement("div");d.style.width="100%",a.appendChild(d);var e=d.offsetWidth;a.parentNode.removeChild(a),b=c-e},j=function(){var a=new XMLHttpRequest;a.open("GET",d.ajaxdataurl,!0),a.onload=function(){if(a.status>=200&&a.status<400){var b=JSON.parse(a.response),c=b.content;d.element.querySelector(".rModal").innerHTML+='<div class="content">'+c+"</div>"}else options.logerrors&&console.log("An error occured when trying to load data from "+d.ajaxdataurl)},a.onerror=function(){options.logerrors&&console.log("A connection error occured when trying to access "+d.ajaxdataurl)},a.send()},k=function(){c=window.innerHeight,l()},l=function(){d.element.style.height=c},m=function(){l(d.name),h()===!0&&g()===!1&&(document.querySelector("body").style.marginRight=b+"px"),document.querySelector("body").classList.add("rModal-locked"),document.querySelector("html").classList.add("rModal-locked"),a.classList.add("fadein"),d.isFed&&j(),d.element.classList.add("rModal-active"),d.element.classList.add("md-show"),setTimeout(function(){d.element.classList.add("md-animation-done")},options.transitiontime),d.element.querySelector(".md-cross").addEventListener("click",function(a){a.preventDefault(),n()})},n=function(){d.element.classList.remove("md-show"),d.element.classList.remove("md-animation-done"),a.classList.add("fadeout"),setTimeout(function(){a.classList.remove("fadein"),a.classList.remove("fadeout"),document.querySelector("body").classList.remove("rModal-locked"),document.querySelector("html").classList.remove("rModal-locked"),d.isFed&&d.element.querySelector(".rModal .content").remove(),document.querySelector("body").style.marginRight="",d.element.classList.remove(d.effect)},options.transitiontime)},o=function(a,b){var c={};return p(a,function(b,d){c[d]=a[d]}),p(b,function(a,d){c[d]=b[d]}),c},p=function(a,b,c){if("[object Object]"===Object.prototype.toString.call(a))for(var d in a)Object.prototype.hasOwnProperty.call(a,d)&&b.call(c,a[d],d,a);else for(var e=0,f=a.length;f>e;e++)b.call(c,a[e],e,a)};return{init:f}}();