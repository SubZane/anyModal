/*! anyModal - v1.1.0 - 2017-09-06
* https://github.com/SubZane/anymodal
* Copyright (c) 2017 Andreas Norman; Licensed MIT */
!function(a,b){"function"==typeof define&&define.amd?define([],b(a)):"object"==typeof exports?module.exports=b(a):a.anyModal=b(a)}("undefined"!=typeof global?global:this.window||this.global,function(a){"use strict";var b,c,d,e,f={},g={element:null,name:"",effect:"am-effect-1",title:"",url:null},h=!!document.querySelector&&!!a.addEventListener,i=document.documentElement.clientHeight,j={transitiontime:300,redrawOnResize:!0,logerrors:!1,backgroundscroll:!0,onInit:function(){},onCreateModal:function(){},onDestroyModal:function(){},onOpen:function(){},onClose:function(){},onDestroy:function(){},OnOrientationChange:function(){},onLoadModalContent:function(){},afterWindowResize:function(){}},k=function(){var a=document.createElement("div");a.className="scrollbar-measure",document.body.appendChild(a),d=a.offsetWidth-a.clientWidth,document.body.removeChild(a)},l=function(){var a=document.createElement("div");a.classList.add("am-overlay"),document.body.appendChild(a),e=document.querySelector(".am-overlay")},m=function(a,b,c){var d=document.createElement("div");for(d.innerHTML=b;d.children.length>0;)a.appendChild(d.children[0]);c(!0)},n=function(a){var b='<div class="am-modal" id="'+g.name+'"><div class="am-content"><div class="am-header"><h3>'+g.title+'</h3><a href="#" class="am-cross"><img src="img/cross.svg" width="19" height="19" alt="" /></a></div><div class="am-inner"></div></div></div>';m(document.body,b,function(a){g.element=document.querySelector("#"+g.name),g.element.classList.add(g.effect),g.element.style.display="none";g.element.offsetHeight;g.element.style.display=""}),w("onCreateModal"),a(!0)},o=function(){g.element.remove(),w("onDestroyModal")},p=function(){return!!/Android|webOS|iPhone|iPad|iPod|BlackBerry|IEMobile|Opera Mini/i.test(navigator.userAgent)},q=function(){return document.body.scrollHeight>document.documentElement.clientHeight},r=function(){i=window.innerHeight,s(),w("afterWindowResize")},s=function(){g.element.style.height=i},t=function(a){var b=new XMLHttpRequest;b.open("GET",g.url,!0),b.onload=function(){b.status>=200&&b.status<400?(g.data=b.response,w("onLoadModalContent"),a(!0)):options.logerrors&&(console.log("An error occured when trying to load data from "+g.url),a(!1))},b.onerror=function(){options.logerrors&&(console.log("A connection error occured when trying to access "+g.url),a(!1))},b.send()},u=function(){q()===!0&&p()===!1&&(document.querySelector("body").style.marginRight=d+"px"),b.backgroundscroll&&(document.querySelector("body").classList.add("am-modal-locked"),document.querySelector("html").classList.add("am-modal-locked")),e.classList.add("fadein"),null!==g.url&&null===document.querySelector("#"+g.name)?n(function(a){s(),t(function(a){m(g.element.querySelector(".am-inner"),g.data,function(a){g.element.classList.add("am-show"),setTimeout(function(){g.element.classList.add("am-animation-done")},b.transitiontime),g.element.querySelector(".am-cross").addEventListener("click",function(a){a.preventDefault(),v()})})})}):(s(),g.element.classList.add("am-show"),setTimeout(function(){g.element.classList.add("am-animation-done")},b.transitiontime),g.element.querySelector(".am-cross").addEventListener("click",function(a){a.preventDefault(),v()}))},v=function(){g.element.classList.remove("am-show"),g.element.classList.remove("am-animation-done"),e.classList.add("fadeout"),setTimeout(function(){e.classList.remove("fadein"),e.classList.remove("fadeout"),document.querySelector("body").classList.remove("am-modal-locked"),document.querySelector("html").classList.remove("am-modal-locked"),document.querySelector("body").style.marginRight="",g.element.classList.remove(g.effect),null!==g.url&&o()},b.transitiontime),w("onClose")},w=function(a){void 0!==b[a]&&b[a].call(c)},x=function(a,b){var c={};return y(a,function(b,d){c[d]=a[d]}),y(b,function(a,d){c[d]=b[d]}),c},y=function(a,b,c){if("[object Object]"===Object.prototype.toString.call(a))for(var d in a)Object.prototype.hasOwnProperty.call(a,d)&&b.call(c,a[d],d,a);else for(var e=0,f=a.length;e<f;e++)b.call(c,a[e],e,a)};return f.destroy=function(){b&&(document.documentElement.classList.remove(b.initClass),document.removeEventListener("click",eventHandler,!1),window.removeEventListener("orientationchange",eventHandler,!1),b=null,eventTimeout=null,w("onDestroy"))},f.init=function(a){if(h){f.destroy(),k(),b=x(j,a||{}),c=document.querySelector(b.container),l(),"click touchmove touchend touchleave touchcancel".split(" ").forEach(function(a){e.addEventListener(a,function(a){a.target===this&&v()})});y(document.querySelectorAll("[data-modal]"),function(a,c){a.addEventListener("click",function(c){if(c.preventDefault(),g.name=a.getAttribute("data-modal"),g.effect=a.getAttribute("data-effect"),g.url=a.getAttribute("data-url"),g.title=a.getAttribute("data-title"),null===g.url){g.element=document.querySelector("#"+g.name),g.element.classList.add(g.effect),g.element.style.display="none";g.element.offsetHeight;g.element.style.display=""}if(b.redrawOnResize===!0){var d;clearTimeout(d),d=setTimeout(r,100)}window.addEventListener("orientationchange",function(){s(),w("OnOrientationChange")}),u()})}),w("onInit")}},f.closePanels=function(){v()},f});